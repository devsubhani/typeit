/*!
 *
 *   typeit - The most versatile animated typing utility on the planet.
 *   Author: Alex MacArthur <alex@macarthur.me> (https://macarthur.me)
 *   Version: v5.10.7
 *   URL: https://typeitjs.com
 *   License: GPL-2.0
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.TypeIt=t()}(this,function(){"use strict";function e(e){let t=e.getBoundingClientRect();return!(t.right>window.innerWidth||t.bottom>window.innerHeight)&&!(t.top<0||t.left<0)}function t(e,t){return Math.abs(Math.random()*(e+t-(e-t))+(e-t))}function i(e,t=""){let i=document.createElement("style");i.id=t,i.appendChild(document.createTextNode(e)),document.head.appendChild(i)}function s(e,t){return 0===e.indexOf(t)}window.TypeItDefaults={strings:[],speed:100,deleteSpeed:null,lifeLike:!0,cursor:!0,cursorChar:"|",cursorSpeed:1e3,breakLines:!0,startDelay:250,startDelete:!1,nextStringDelay:750,loop:!1,loopDelay:!1,html:!0,autoStart:!0,callback:!1,beforeString:!1,afterString:!1,beforeStep:!1,afterStep:!1,afterComplete:!1};class n{constructor(e,t,i,s,n){var r;this.id=t,this.typeit=n,this.autoInit=s,this.element=e,this.timeouts=[],this.hasStarted=!1,this.isFrozen=!1,this.isComplete=!1,this.hasBeenDestroyed=!1,this.queue=[],this.isInTag=!1,this.stringsToDelete="",this.inlineStyles={base:"display:inline;position:relative;font:inherit;color:inherit;line-height:inherit;"},this.setOptions(i,window.TypeItDefaults,!1),this.prepareTargetElement(),this.prepareDelay("nextStringDelay"),this.prepareDelay("loopDelay"),this.prepareDOM(),this.options.strings=(r=this.options.strings,(Array.isArray(r)?r.slice(0):r.split("<br>")).map(e=>e.replace(/<\!--.*?-->/g,""))),this.options.startDelete&&this.stringsToDelete&&(this.insert(this.stringsToDelete),this.queue.push([this.delete]),this.insertSplitPause(1)),this.generateQueue(),console.log(this.queue),this.fire()}async fire(){for(let e of this.queue)await new Promise((t,i)=>{setTimeout(()=>{e[0].call(this,e[1],e[2]),t()},this.typePace)})}prepareDOM(){this.element.innerHTML=`\n      <span style="${this.inlineStyles.base}" class="ti-wrapper">\n        <span style="${this.inlineStyles.base}" class="ti-container"></span>\n      </span>\n      `,this.element.setAttribute("data-typeitid",this.id),this.elementContainer=this.element.querySelector(".ti-container"),this.elementWrapper=this.element.querySelector(".ti-wrapper"),i(`\n        .${this.elementContainer.className}:before {\n          content: '.';\n          display: inline-block;\n          width: 0;\n          visibility: hidden;\n        }\n      `)}reset(){return new n(this.element,this.id,this.options,this.autoInit,this.typeit)}contents(e=null){return null===e?this.options.html?this.elementContainer.innerHTML:this.elementContainer.innerText:(this.elementContainer[this.options.html?"innerHTML":"innerText"]=e,e)}prepareDelay(e){let t=this.options[e];if(!t)return;let i=Array.isArray(t),s=i?null:t/2;this.options[e]={before:i?t[0]:s,after:i?t[1]:s,total:i?t[0]+t[1]:t}}generateQueue(e=null){e=null===e?[this.pause,this.options.startDelay]:e,this.queue.push(e),this.options.strings.forEach((e,t)=>{if(this.queueString(e),t+1!==this.options.strings.length){if(this.options.breakLines)return this.queue.push([this.break]),void this.insertSplitPause(this.queue.length);this.queueDeletions(e),this.insertSplitPause(this.queue.length,e.length)}})}queueDeletions(e=null){let t="string"==typeof e?e.length:e;for(let e=0;e<t;e++)this.queue.push([this.delete,1])}queueString(e){if(!e)return;e="some string <strong>text</strong>.<i>another</i>";let t=(new DOMParser).parseFromString(e,"text/html").body.querySelectorAll("*");[].slice.call(t).forEach((t,i)=>{e=e.replace(t.outerHTML,"{%}")});let i=e.split("{%}");console.log(i),console.log(i)}insertSplitPause(e,t=1){this.queue.splice(e,0,[this.pause,this.options.nextStringDelay.before]),this.queue.splice(e-t,0,[this.pause,this.options.nextStringDelay.after])}init(){if(this.hasStarted)return;if(this.cursor(),this.options.autoStart)return this.hasStarted=!0,void this.next();if(e(this.element))return this.hasStarted=!0,void this.next();let t=this;window.addEventListener("scroll",function i(s){e(t.element)&&!t.hasStarted&&(t.hasStarted=!0,t.next(),s.currentTarget.removeEventListener(s.type,i))})}cursor(){let e="visibility: hidden;";this.options.cursor&&(i(`\n        @keyframes blink-${this.id} {\n          0% {opacity: 0}\n          49% {opacity: 0}\n          50% {opacity: 1}\n        }\n\n        [data-typeitid='${this.id}'] .ti-cursor {\n          animation: blink-${this.id} ${this.options.cursorSpeed/1e3}s infinite;\n        }\n      `,this.id),e=""),this.elementWrapper.insertAdjacentHTML("beforeend",`<span style="${this.inlineStyles.base}${e}left: -.25ch;" class="ti-cursor">${this.options.cursorChar}</span>`)}insert(e,t=!1){t?this.elementContainer.lastChild.insertAdjacentHTML("beforeend",e):this.elementContainer.insertAdjacentHTML("beforeend",e),this.contents(this.contents().split("").join(""))}prepareTargetElement(){[].slice.call(this.element.childNodes).forEach(e=>{void 0!==e.classList&&e.classList.contains("ti-container")&&(this.element.innerHTML="")}),!this.options.startDelete&&this.element.innerHTML.length>0?this.options.strings=this.element.innerHTML.trim():this.stringsToDelete=this.element.innerHTML}break(){this.insert("<br>"),this.next()}pause(e=!1){setTimeout(()=>{this.next()},e||this.options.nextStringDelay.total)}rake(e){return e.map(e=>(e=e.split(""),this.options.html?function(e){let t,i=[],s=!1;for(let n=0;n<e.length;n++)"<"!==e[n]&&"&"!==e[n]||(i[0]=n,s="&"===e[n]),(">"===e[n]||";"===e[n]&&s)&&(i[1]=n,n=0,t=e.slice(i[0],i[1]+1).join(""),e.splice(i[0],i[1]-i[0]+1,t),s=!1);return e}(e):e))}type(e){this.setPace(),this.timeouts[0]=setTimeout(()=>"string"!=typeof e?(e.innerHTML="",this.elementContainer.appendChild(e),this.isInTag=!0,void this.next()):s(e,"</")?(this.isInTag=!1,void this.next()):(this.insert(e,this.isInTag),void this.next()),this.typePace)}setOptions(e,t=null,i=!0){let s={};null===t&&(t=this.options);for(let e in t)s[e]=t[e];for(let t in e)s[t]=e[t];this.options=s,i&&this.next()}setPace(){let e=this.options.speed,i=null!==this.options.deleteSpeed?this.options.deleteSpeed:this.options.speed/3,s=e/2,n=i/2;this.typePace=this.options.lifeLike?t(e,s):e,this.deletePace=this.options.lifeLike?t(i,n):i}delete(e=null){this.timeouts[1]=setTimeout(()=>{this.setPace();let t=this.contents().split("");for(let e=t.length-1;e>-1;e--){if(">"!==t[e]&&";"!==t[e]||!this.options.html){t.pop();break}for(let s=e;s>-1;s--){if("<br>"===t.slice(s-3,s+1).join("")){t.splice(s-3,4);break}if("&"===t[s]){t.splice(s,e-s+1);break}if("<"===t[s]&&">"!==t[s-1]){if(";"===t[s-1])for(var i=s-1;i>-1;i--)if("&"===t[i]){t.splice(i,s-i);break}t.splice(s-1,1);break}}break}if(this.options.html&&this.contents().indexOf("></")>-1)for(let e=this.contents().indexOf("></")-2;e>=0;e--)if("<"===t[e]){t.splice(e,t.length-e);break}this.contents(t.join("").replace(/<[^\/>][^>]*><\/[^>]+>/,"")),null===e&&this.queue.unshift([this.delete,t.length]),e>1&&this.queue.unshift([this.delete,e-1]),this.next()},this.deletePace)}empty(){this.contents(""),this.next()}next(){}}class r{constructor(e,t,i=!0){this.id=Math.random().toString(36).substring(2,15),this.instances=[],this.elements=[],this.args=t,this.autoInit=i,"object"==typeof e&&(void 0===e.length?this.elements.push(e):this.elements=e),"string"==typeof e&&(this.elements=document.querySelectorAll(e)),this.generateInstances()}generateInstances(){[].slice.call(this.elements).forEach(e=>{this.instances.push(new n(e,this.id,this.args,this.autoInit,this))})}queueUp(e,t=null){this.init(!0),this.instances.forEach(i=>{i.queue.push([i[e],t]),!0===i.isComplete&&i.next(),i.isComplete=!1})}}return class extends r{constructor(e,t,i=!0){super(e,t,i)}get isComplete(){return!!this.instances.length&&this.instances[0].isComplete}get hasBeenDestroyed(){return!!this.instances.length&&this.instances[0].hasBeenDestroyed}get hasStarted(){return!!this.instances.length&&this.instances[0].hasStarted}get isFrozen(){return!!this.instances.length&&this.instances[0].isFrozen}type(e=""){return this.init(!0),this.instances.forEach(t=>{t.queueString(e),!0===t.isComplete&&t.next(),t.isComplete=!1}),this}delete(e=null){return this.queueUp("delete",e),this}pause(e=null){return this.queueUp("pause",e),this}empty(){return this.queueUp("empty"),this}break(){return this.queueUp("break"),this}options(e){return this.queueUp("setOptions",e),this}freeze(){this.instances.forEach(e=>{e.isFrozen=!0})}unfreeze(){this.instances.forEach(e=>{e.isFrozen&&(e.isFrozen=!1,e.next())})}destroy(e=!0){this.instances.forEach(t=>{t.timeouts.forEach(e=>{clearTimeout(e)}),t.timeouts=[],e&&t.options.cursor&&t.elementWrapper.removeChild(t.elementWrapper.querySelector(".ti-cursor")),t.hasBeenDestroyed=!0})}reset(){this.instances=this.instances.map(e=>e.reset())}init(e=!1){this.instances.forEach(t=>{e?t.autoInit&&t.init():t.init()})}}});
